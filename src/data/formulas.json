{
  "_meta": {
    "description": "Energy calculation formulas and activity factors",
    "sources": ["Mifflin-St Jeor (1990)", "IOM DRI for pregnancy energy increments"]
  },
  "bmr_equations": {
    "mifflin_st_jeor": {
      "description": "Most accurate for overweight individuals. Calculates Resting Metabolic Rate (RMR).",
      "female": {
        "formula": "(10 × weight_kg) + (6.25 × height_cm) - (5 × age_years) - 161",
        "example": "For 30yo, 65kg, 165cm: (10×65) + (6.25×165) - (5×30) - 161 = 650 + 1031.25 - 150 - 161 = 1370 kcal"
      },
      "male": {
        "formula": "(10 × weight_kg) + (6.25 × height_cm) - (5 × age_years) + 5",
        "example": "For 30yo, 75kg, 178cm: (10×75) + (6.25×178) - (5×30) + 5 = 750 + 1112.5 - 150 + 5 = 1718 kcal"
      }
    },
    "harris_benedict_revised": {
      "description": "Classic equation, slightly overestimates for obese individuals.",
      "female": {
        "formula": "447.593 + (9.247 × weight_kg) + (3.098 × height_cm) - (4.330 × age_years)"
      },
      "male": {
        "formula": "88.362 + (13.397 × weight_kg) + (4.799 × height_cm) - (5.677 × age_years)"
      }
    }
  },
  "activity_factors": {
    "description": "Multiply BMR/RMR by activity factor to get Total Daily Energy Expenditure (TDEE)",
    "sedentary": {
      "factor": 1.2,
      "description": "Little or no exercise, desk job"
    },
    "light": {
      "factor": 1.375,
      "description": "Light exercise 1-3 days/week"
    },
    "moderate": {
      "factor": 1.55,
      "description": "Moderate exercise 3-5 days/week"
    },
    "active": {
      "factor": 1.725,
      "description": "Hard exercise 6-7 days/week"
    },
    "very_active": {
      "factor": 1.9,
      "description": "Very hard exercise, physical job, or training twice/day"
    }
  },
  "pregnancy_energy_increments": {
    "description": "Additional kcal/day needed during pregnancy (on top of TDEE)",
    "trimester_1": {
      "weeks": "1-13",
      "increment_kcal": 0,
      "note": "No additional energy needed in T1"
    },
    "trimester_2": {
      "weeks": "14-27",
      "increment_kcal": 340,
      "note": "~340 kcal/day additional"
    },
    "trimester_3": {
      "weeks": "28-42",
      "increment_kcal": 452,
      "note": "~452 kcal/day additional"
    },
    "multiples_adjustment": {
      "description": "For twins/multiples, additional energy needed",
      "twins_additional_kcal": 300,
      "note": "Add ~300 kcal/day extra for twins on top of singleton increment"
    }
  },
  "lactation_energy_increments": {
    "months_0_6": {
      "increment_kcal": 500,
      "note": "Exclusive breastfeeding"
    },
    "months_7_12": {
      "increment_kcal": 400,
      "note": "Partial breastfeeding with complementary foods"
    }
  },
  "bmi_calculation": {
    "formula": "weight_kg / (height_m × height_m)",
    "categories": {
      "underweight": { "max": 18.5 },
      "normal": { "min": 18.5, "max": 24.9 },
      "overweight": { "min": 25, "max": 29.9 },
      "obese_class_1": { "min": 30, "max": 34.9 },
      "obese_class_2": { "min": 35, "max": 39.9 },
      "obese_class_3": { "min": 40 }
    }
  },
  "pregnancy_weight_gain_recommendations": {
    "description": "IOM 2009 guidelines for total weight gain during pregnancy based on pre-pregnancy BMI",
    "singleton": {
      "underweight": { "total_kg_min": 12.5, "total_kg_max": 18, "weekly_t2_t3_kg": 0.51 },
      "normal": { "total_kg_min": 11.5, "total_kg_max": 16, "weekly_t2_t3_kg": 0.42 },
      "overweight": { "total_kg_min": 7, "total_kg_max": 11.5, "weekly_t2_t3_kg": 0.28 },
      "obese": { "total_kg_min": 5, "total_kg_max": 9, "weekly_t2_t3_kg": 0.22 }
    },
    "twins": {
      "normal": { "total_kg_min": 17, "total_kg_max": 25 },
      "overweight": { "total_kg_min": 14, "total_kg_max": 23 },
      "obese": { "total_kg_min": 11, "total_kg_max": 19 }
    }
  },
  "macronutrient_calculations": {
    "protein_from_rda": {
      "description": "Use RDA directly (g/day)"
    },
    "fat_from_amdr": {
      "description": "Fat in grams from energy and AMDR percentage",
      "formula": "(energy_kcal × amdr_percent / 100) / 9",
      "note": "Fat provides 9 kcal/g"
    },
    "carbs_from_energy": {
      "description": "Remaining energy after protein and fat",
      "formula": "(energy_kcal - (protein_g × 4) - (fat_g × 9)) / 4",
      "note": "Carbs and protein provide 4 kcal/g"
    }
  }
}
